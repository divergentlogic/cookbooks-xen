# Generated by Chef for <%= node[:hostname] %>

<% if !node[:xen][:xen_tools][:directory].empty? %>
<%= "dir = #{node[:xen][:xen_tools][:directory]}" %>
<% elsif !node[:xen][:xen_tools][:volume_group].empty? %>
<%= "lvm = #{node[:xen][:xen_tools][:volume_group]}" %>
<% else%>
<% Chef::Log.warn "No storage option is set for xen-tools. Provide a directory (node[:xen][:xen_tools][:directory]) or volume group (node[:xen][:xen_tools][:volume_group])"%>
<% end %>

size   = <%= node[:xen][:xen_tools][:disk_size] %>      # Disk image size.
memory = <%= node[:xen][:xen_tools][:memory] %>    # Memory size
swap   = <%= node[:xen][:xen_tools][:swap] %>    # Swap size
# noswap = 1      # Don't use swap at all for the new system.
fs     = ext3     # use the EXT3 filesystem for the disk image.
dist   = <%= node[:xen][:xen_tools][:distribution] %>      # Default distribution to install.
image  = sparse   # Specify sparse vs. full disk images.

gateway   = <%= node[:xen][:xen_tools][:gateway] %>
netmask   = <%= node[:xen][:xen_tools][:netmask] %>
broadcast = <%= node[:xen][:xen_tools][:broadcast] %>

passwd = <%= node[:xen][:xen_tools][:passwd] %>

kernel      = <%= node[:xen][:xen_tools][:kernel] %>
initrd      = <%= node[:xen][:xen_tools][:initrd] %>

mirror = <%= node[:xen][:xen_tools][:mirror] %>

#
#  Filesystem options for the different filesystems we support.
#
ext3_options     = noatime,nodiratime,errors=remount-ro
ext2_options     = noatime,nodiratime,errors=remount-ro
xfs_options      = defaults
reiserfs_options = defaults
btrfs_options    = defaults

<% unless node[:xen][:xen_tools][:serial_device].empty? %>
serial_device = <%= node[:xen][:xen_tools][:serial_device] %> 
<% end %>
<% unless node[:xen][:xen_tools][:disk_device] %>
disk_device = <%= node[:xen][:xen_tools][:disk_device] %>
<% end %>
